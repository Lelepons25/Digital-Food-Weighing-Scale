#:import Factory kivy.factory.Factory

<Homepage>
    name: "Homepage"

    MDCard:
        size_hint: None, None
        size: 150, 80
        pos_hint: {'x': 0.32, 'top':0.96}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        # SAVE
        MDRoundFlatIconButton:
            id: save
            icon: "content-save"
            size_hint: (0.7,0.7)
            pos_hint: {'center_x':0.5 , 'center_y':0.5}
            text: 'Save'
            text_color: "black"
            on_release:
                root.enter_topButton("Save")

        
        # TARE
        MDRoundFlatIconButton:
            id: tare
            icon: "weight-gram"
            size_hint: (0.7,0.7)
            pos_hint: {'center_x':0.5 , 'center_y':0.5}
            text: 'Tare'
            text_color: "black"
        
    MDCard:
        size_hint: None, None
        size: 150, 80
        pos_hint: {'x': 0.48, 'top':0.96}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        # PROFILE
        MDRoundFlatIconButton:
            id: profile
            icon: "face-man-profile"
            size_hint: (0.7,0.7)
            pos_hint: {'center_x':0.5 , 'center_y':0.5}
            text: 'Profile'
            text_color: "black"

            on_release:
                app.root.generateEditProfilePageScreen()

        # HISTORY
        MDRoundFlatIconButton:
            id: foodHistory
            icon: "history"
            size_hint: (0.7, 0.7)
            pos_hint: {'center_x':0.5 , 'center_y':0.5}
            text: 'History'
            text_color: "black"

            on_release:
                app.root.generateFoodHistoryPageScreen()
                

    
    MDCard:
        size_hint: None, None
        size: 270, 80
        pos_hint: {'x': 0.65, 'top':0.96}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        # CALORIE TRACKER
        MDLabel:
            text: "Calorie Tracker"
            id: tracker
            font_size: 16
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]
            padding_y: 5

        MDLabel:
            id: cal_tracker
            # text: f"{root.manager.progress_value}% Progress"

        ProgressBar:
            id: cal_tracker_bar
            min: 0
            max: 1
            pos_hint: {'x': 0}
            size_hint_x: 1
    

    FloatLayout:
        size_hint: (0.28, 0.2)
        pos_hint:{'x':0.02, 'top': 0.96}
        
        canvas.before:
            Color:
                rgba: 0.204, 0.204, 0.204, 1
            Line:
                width: 1.2
                rectangle: (self.x, self.y, self.width, self.height)


    ###########################################################################    
        #   WEIGHT       
        MDLabel:
            id: weight_input
            text: '0'
            bold: True
            font_size: 60
            color: 0.204, 0.204, 0.204, 1
            pos_hint:{'x':0.01, 'top': 1}


##############################################################################

    GridLayout:
        id: category_grid
        size_hint: (1, 0.6)
        pos_hint:{'x':0.01, 'top': 0.7}

        cols: 5
        rows: 2

        spacing: 40
        padding: 10

        # CEREALS
        Button:
            id: cereals_categ
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            
            on_press:
                app.root.generateCategoryPageScreen('Cereals')
                #root.manager.transition.direction = "left"
            
            Image:
                id: cereals_icon
                source: 'icons/cereals.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        # STARCHY    
        Button:
            id: starchy_categ
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release: 
                app.root.generateCategoryPageScreen('Roots')
                # root.manager.transition.direction = "left"
            
            Image:
                id: starchy_icon
                source: 'icons/starchy.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        # NUTS
        Button:
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateCategoryPageScreen('Nuts')
                # root.manager.transition.direction = "left"

            Image:
                id: nuts_icon
                source: 'icons/nuts.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        # VEGETABLES

        Button:
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateCategoryPageScreen('Vegetables')
                # root.manager.transition.direction = "left"

            Image:
                id: veg_icon
                source: 'icons/vegetable.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        
        # FRUITS
        Button:
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateCategoryPageScreen('Fruits')
                # root.manager.transition.direction = "left"

            Image:
                id: veg_icon
                source: 'icons/fruits.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        
        # MEAT
        Button:
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateCategoryPageScreen('Meat')
                # root.manager.transition.direction = "left"
            
            Image:
                id: meat_icon
                source: 'icons/meat.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        
        # SEAFOOD
        Button:
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateCategoryPageScreen('Seafood')
                # root.manager.transition.direction = "left"
            
            Image:
                id: seafood_icon
                source: 'icons/seafood.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        
        # EGG
        Button:
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateCategoryPageScreen('Eggs')
                # root.manager.transition.direction = "left"
            
            Image:
                id: egg_icon
                source: 'icons/egg.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        
        # MILK
        Button:
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateCategoryPageScreen('Milk')
            
            Image:
                id: milk_icon
                source: 'icons/milk.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        

        Button:
            id: more_button
            size_hint: (.2, .2)
            background_color: 0,0,1,0
            on_release:
                app.root.generateMorePageScreen()
            Image:
                id: more_icon
                source: 'icons/more.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y



############################# Food Category Labels
    
    # CEREALS
    MDCard:
        size_hint: None, None
        size: 60, 30
        pos_hint: {'x': 0.06, 'top':0.45}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Cereals"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'
    
    # STARCHY
    MDCard:
        size_hint: None, None
        size: 90, 30
        pos_hint: {'x': 0.25, 'top':0.45}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Starchy Roots"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'
    
    # NUTS
    MDCard:
        size_hint: None, None
        size: 130, 30
        pos_hint: {'x': 0.43, 'top':0.44}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Nuts and Products"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'

    # VEGETABLES
    MDCard:
        size_hint: None, None
        size: 90, 30
        pos_hint: {'x': 0.66, 'top':0.44}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Vegetables"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'
       
    # FRUITS
    MDCard:
        size_hint: None, None
        size: 90, 30
        pos_hint: {'x': 0.85, 'top':0.44}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Fruits"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'

    #### 2nd Row
    
    # MEAT
    MDCard:
        size_hint: None, None
        size: 120, 30
        pos_hint: {'x': 0.04, 'top':0.12}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Meat and Products"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'


    # SEAFOOD
    MDCard:
        size_hint: None, None
        size: 60, 30
        pos_hint: {'x': 0.27, 'top':0.12}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Seafood"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'

    # EGG
    MDCard:
        size_hint: None, None
        size: 130, 30
        pos_hint: {'x': 0.45, 'top':0.12}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Eggs and Products"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'

    # MILK
    MDCard:
        size_hint: None, None
        size: 130, 30
        pos_hint: {'x': 0.64, 'top':0.12}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "Milk and Products"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'

    # MORE    
    MDCard:
        size_hint: None, None
        size: 60, 30
        pos_hint: {'x': 0.88, 'top':0.12}
        padding: 5
        spacing: 5
        orientation: 'vertical'

        MDLabel:
            text: "More"
            font_size: 12
            background_color: utils.get_color_from_hex('#09E4F5')
            halign: 'center'